
language = "nodejs"
entrypoint = "server/index.ts"

[deployment]
run = ["npm", "run", "build", "&&", "npm", "start"]
deploymentTarget = "static"
publicDir = "dist/client"
buildCommand = "npm run build"

[[deployment.responseHeaders]]
path = "/*"
name = "X-Content-Type-Options"
value = "nosniff"

[[deployment.responseHeaders]]
path = "/*"  
name = "X-Frame-Options"
value = "DENY"

[[deployment.responseHeaders]]
path = "/api/*"
name = "Access-Control-Allow-Origin"
value = "*"

[[deployment.rewrites]]
from = "/api/*"
to = "/api/*"

[[deployment.rewrites]]
from = "/*"
to = "/index.html"

[nix]
channel = "stable-23.11"

[gitHubImport]
requiredFiles = [".replit", "replit.nix"]

[env]
NODE_ENV = "production"
PORT = "5000"

[packager]
language = "nodejs"
  [packager.features]
  enabledForHosting = false
  packageSearch = true
  guessImports = true

[languages.javascript]
pattern = "**/{*.js,*.jsx,*.ts,*.tsx}"
  [languages.javascript.languageServer]
  start = "typescript-language-server --stdio"

[debugger]
support = true
  [debugger.interactive]
  transport = "localhost:0"
  startCommand = ["dap-node"]
    [debugger.interactive.initializeMessage]
    command = "initialize"
    type = "request"
      [debugger.interactive.initializeMessage.arguments]
      clientID = "replit"
      clientName = "replit.com"
      columnsStartAt1 = true
      linesStartAt1 = true
      locale = "en-us"
      pathFormat = "path"
      supportsInvalidatedEvent = true
      supportsProgressReporting = true
      supportsRunInTerminalRequest = true
      supportsVariablePaging = true
      supportsVariableType = true

    [debugger.interactive.launchMessage]
    command = "launch"
    type = "request"
      [debugger.interactive.launchMessage.arguments]
      args = []
      console = "externalTerminal"
      cwd = "."
      environment = []
      pauseForSourceMap = false
      program = "./server/index.ts"
      request = "launch"
      sourceMaps = true
      stopOnEntry = false
      type = "node"

[workflows]
runButton = "SpiralScript IDE"
